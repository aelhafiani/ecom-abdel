<div class="container py-4">
  <!-- Filter Component -->
  <app-product-filter
    (categoryChange)="onCategoryChange($event)"
  />

  <!-- Product Grid -->
  <div
    class="row g-4"
    infiniteScroll
    [infiniteScrollDistance]="2" 
    [infiniteScrollThrottle]="150"
    (scrolled)="onScrollDown()"
  >
    <ng-container
      *ngIf="filteredProducts$ | async as listProducts; else loadingTemplate"
    >
      @for (item of listProducts; track item) {
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          <app-product-card [product]="item" />
        </div>
      }
    </ng-container>

    <ng-template #loadingTemplate>
      <div
        class="d-flex justify-content-center align-items-center w-100 py-5"
      >
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </ng-template>
  </div>
</div>
